<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Lilecloud Site</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content><meta name=generator content="Hugo 0.104.3"><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/ananke/css/main.min.css><link href=/posts/index.xml rel=alternate type=application/rss+xml title="Lilecloud Site"><link href=/posts/index.xml rel=feed type=application/rss+xml title="Lilecloud Site"><meta property="og:title" content="Posts"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://lilecloud.github.io//posts/"><meta itemprop=name content="Posts"><meta itemprop=description content><meta name=twitter:card content="summary"><meta name=twitter:title content="Posts"><meta name=twitter:description content></head><body class="ma0 avenir bg-near-white"><header><div class="pb3-m pb6-l bg-black"><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=// class="f3 fw2 hover-white no-underline white-90 dib">Lilecloud Site</a><div class="flex-l items-center"><div class=ananke-socials></div></div></div></nav><div class="tc-l pv3 ph3 ph4-ns"><h1 class="f2 f-subheadline-l fw2 light-silver mb0 lh-title">Posts</h1></div></div></header><main class=pb7 role=main><article class="pa3 pa4-ns nested-copy-line-height"><section class="cf ph3 ph5-l pv3 pv4-l f4 tc-l center measure-wide lh-copy mid-gray"></section><section class="flex-ns flex-wrap justify-around mt5"><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/posts/java%E9%9D%A2%E8%AF%95%E9%A2%98/ class="link black dim">Java面试题</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">一、Java 基础 Java 内存模型(Java Memory model) JMM 是一组抽象的概念不是真实存在，他描述了一组规则或规范，通过这组规范来限定程序中变量的访问方式。Java 是基于虚拟机运行，在虚拟机规范中，定义了一组规范来屏蔽掉硬件以及不同操作系统之间对访问内存的差异，使得Java程序在跨平台中内存访问得到一致。 Java 线程之间的通信是由JMM控制的
JVM运行程序的实体是线程，而每个线程创建时 JVM 都会为其创建一个工作内存（有些地方称为栈空间），用于存储线程私有的数据，而Java 内存模型中规定所有变量都存储在主内存，其主内存是共享内存区域，所有线程都可以访问，但线程对变量的操作（读取赋值等）必须在工作内存中进行，首先要将变量从主内存复制到自己的工作内存空间，然后对变量进行操作，操作完成后再将变量写回主内存，不能直接操作主内存中的变量，工作内存中存储这主内存中的变量副本拷贝，工作内存是每个线程的私有数据区域，因此不同的线程间无法访问对方的工作内存，线程间的通信（传值）必须通过主内存来完成。
如果一个对象只是这个线程私有的，那么他会被分配到主内存还是仅仅在该线程的工作内存？ 应该是分配在主内存，因为生成对象的时候并不知道该对象是否会被线程共享 ![[Pasted image 20240812093554.png]]
如何控制变量在多线程之间共享 加锁：synchronized 关键，手动Lock等 volatile：volatile 关键字实现了MESI(缓存一致性协议)，可以让共享变量的变更体现在各个线程中 Java 并发编程 sleep 和 wait 方法的 区别 sleep 是属于 Thread 类的，wait 是属于Object累的 sleep 不会释放锁， wait 会释放锁</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/posts/github-codespace/ class="link black dim">Github Codespace 使用</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">如何将本地端口转发到github codespace中 首先安装github cli https://docs.github.com/zh/github-cli 使用github cli 进行端口转发 获取CODESPACE-NAME gh codespace list 进行端口转发 gh codespace ports forward CODESPACE-PORT_NAME:LOCAL-PORT-NAME -c CODESPACE-NAME</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/posts/http-header-too-long%E5%AF%BC%E8%87%B4response-status-400/ class="link black dim">Http Header Too Long导致response Status 400</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">问题表象 在服务间调用时会报错，http response status=400 Bad Request, 此时查看接口的url和参数，发现没有任何问题，且该问题也不是必现，只是请求才会发生
问题原因 tomcat 在http请求时会对http header大小做限制，默认限制8k,超出此大小是会报400, 详见： https://tomcat.apache.org/tomcat-9.0-doc/config/http.html maxHttpHeaderSize 属性。
在服务间http调用时，经常会在http header中传递一些参数，如果参数过大就会造成这种情况</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/posts/my-first-post/ class="link black dim">My First Post</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">my first post test</div></div></div></div></section></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://lilecloud.github.io//>&copy; Lilecloud Site 2024</a><div><div class=ananke-socials></div></div></div></footer></body></html>